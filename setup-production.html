<!DOCTYPE html>
<html lang="en">
<head>
<script src="js/mlpushmenu.js" type="text/javascript"></script>
<script src="js/modernizr.custom.js" type="text/javascript"></script>
<script src="js/classie.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<meta charset="UTF-8">
<!--[if IE]>
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<![endif]-->
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Asciidoctor 2.0.16" name="generator">
<title>Install Taiga in Production</title>
<style>/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}</style>
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f0f0f0; }
pre.pygments .tok-c { color: #60a0b0; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #007020; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #60a0b0; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #007020 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #60a0b0; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #FF0000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
pre.pygments .tok-go { color: #888888 } /* Generic.Output */
pre.pygments .tok-gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #007020; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #007020 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #902000 } /* Keyword.Type */
pre.pygments .tok-m { color: #40a070 } /* Literal.Number */
pre.pygments .tok-s { color: #4070a0 } /* Literal.String */
pre.pygments .tok-na { color: #4070a0 } /* Name.Attribute */
pre.pygments .tok-nb { color: #007020 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0e84b5; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #60add5 } /* Name.Constant */
pre.pygments .tok-nd { color: #555555; font-weight: bold } /* Name.Decorator */
pre.pygments .tok-ni { color: #d55537; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #007020 } /* Name.Exception */
pre.pygments .tok-nf { color: #06287e } /* Name.Function */
pre.pygments .tok-nl { color: #002070; font-weight: bold } /* Name.Label */
pre.pygments .tok-nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #062873; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #bb60d5 } /* Name.Variable */
pre.pygments .tok-ow { color: #007020; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #40a070 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #40a070 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #40a070 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #40a070 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #40a070 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #4070a0 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #4070a0 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #4070a0 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #4070a0 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #4070a0 } /* Literal.String.Double */
pre.pygments .tok-se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #4070a0 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #c65d09 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #235388 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #4070a0 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #517918 } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #007020 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #06287e } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #bb60d5 } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #bb60d5 } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #bb60d5 } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #bb60d5 } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #40a070 } /* Literal.Number.Integer.Long */</style>
</head>
<link href="css/menu.css" rel="stylesheet">
<link href="css/icons.css" rel="stylesheet">
<link href="css/main.css" rel="stylesheet">
<link href="css/styles.css" rel="stylesheet">
<body class="article toc2 toc-left"></body>
</html>
<div class="container">
<a class="menu-trigger" id="trigger"></a>
<div class="mp-pusher" id="mp-pusher">
<div class="toc2" id="toc">
<div class="mp-level">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li>
<a href="#setup-prod-with-docker">1. Docker</a>
<div class="mp-level">
<a class="mp-back" href="#">back</a>
<ul class="sectlevel2">
<li>
<a href="#_requirements">1.1. Requirements</a>
</li>
<li>
<a href="#_get_repository">1.2. Get repository</a>
</li>
<li>
<a href="#_configuration_and_customisation_with_environment_variables">1.3. Configuration and Customisation with Environment Variables</a>
</li>
<li>
<a href="#_configuration">1.4. Configuration</a>
</li>
<li>
<a href="#_customisation">1.5. Customisation</a>
</li>
<li>
<a href="#_advanced_configuration_and_customisation">1.6. Advanced configuration and customisation</a>
</li>
<li>
<a href="#_configure_an_admin_user">1.7. Configure an admin user</a>
</li>
<li>
<a href="#_up_and_running">1.8. Up and running</a>
</li>
<li>
<a href="#_configure_the_proxy">1.9. Configure the proxy</a>
</li>
<li>
<a href="#_change_between_subpath_and_subdomain">1.10. Change between subpath and subdomain</a>
</li>
</ul>
</div>
</li>
<li>
<a href="#setup-prod-from-source-code">2. From source code</a>
<div class="mp-level">
<a class="mp-back" href="#">back</a>
<ul class="sectlevel2">
<li>
<a href="#_introduction">2.1. Introduction</a>
</li>
<li>
<a href="#_pre_requisites">2.2. Pre-requisites</a>
</li>
<li>
<a href="#_dependencies">2.3. Dependencies</a>
</li>
<li>
<a href="#_install_system_dependencies">2.4. Install System Dependencies</a>
</li>
<li>
<a href="#_create_a_user_taiga">2.5. Create a user <code>taiga</code></a>
</li>
<li>
<a href="#_configuring_postgresql_and_rabbitmq">2.6. Configuring PostgreSQL and RabbitMQ</a>
</li>
<li>
<a href="#taiga-back">2.7. Backend Setup</a>
</li>
<li>
<a href="#taiga-front">2.8. Frontend Setup</a>
</li>
<li>
<a href="#taiga-events">2.9. Events Setup</a>
</li>
<li>
<a href="#install-protected">2.10. Taiga protected Setup</a>
</li>
<li>
<a href="#start-taiga">2.11. Start Taiga</a>
</li>
<li>
<a href="#expose-taiga-nginx">2.12. Expose Taiga with NGINX</a>
</li>
<li>
<a href="#expose-taiga-other">2.13. Other methods to expose Taiga</a>
</li>
<li>
<a href="#extend-taiga">2.14. Extend Taiga</a>
</li>
<li>
<a href="#troubleshooting">2.15. Troubleshooting</a>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="scroller">
<div id="header">
<h1>Install Taiga in Production</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="setup-prod-with-docker">1. Docker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the easiest and <strong>recommended</strong> way to run Taiga in production.
This document explains how to deploy a full Taiga service for a production environment with <code>docker</code>.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong> If you&#8217;re updating from serving taiga6 in subdomain to subpath, check the specific instructions at the end of this tutorial.</p>
</div>
<div class="sect2">
<h3 id="_requirements">1.1. Requirements</h3>
<div class="paragraph">
<p>Prior to start the installation, ensure you have installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>docker</code>: version &gt;= 17.09.0+</p>
</li>
<li>
<p><code>docker-compose</code>: version &gt;= 1.27.0+</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, it&#8217;s necessary to have familiarity with Docker, docker-compose and Docker repositories.</p>
</div>
</div>
<div class="sect2">
<h3 id="_get_repository">1.2. Get repository</h3>
<div class="paragraph">
<p>Clone <a href="https://github.com/kaleidos-ventures/taiga-docker">this repository</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>$ <span class="tok-nb">cd</span> taiga-docker/&#x000A;$ git checkout stable</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_and_customisation_with_environment_variables">1.3. Configuration and Customisation with Environment Variables</h3>
<div class="paragraph">
<p>This configuration is likely to suit what you need. Edit environment variables in <code>docker-compose.yml</code> and <code>docker-compose-inits.yml</code>. Have in mind that some of the variables are in both files, and you need to edit both.</p>
</div>
<div class="paragraph">
<p><strong>Configuration</strong> variables are in <code>docker-compose.yml</code> with default values that we strongly recommend that you change or review. Those variables are needed to run Taiga. Apart from this configuration, you can have some <strong>customisation</strong> in Taiga, that add features which are disabled by default. Find those variables in <strong>Customisation</strong> section and add the corresponding environment variables whenever you want to enable them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration">1.4. Configuration</h3>
<div class="paragraph">
<div class="title">Database configuration</div>
<p>These vars will be used to create the database for Taiga and connect to it.</p>
</div>
<div class="paragraph">
<p><strong>Important</strong>: these vars should have the same values in <code>taiga-back</code> and <code>taiga-db</code>.</p>
</div>
<div class="paragraph">
<p><strong>Service: taiga-db</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>POSTGRES_DB: taiga&#x000A;POSTGRES_USER: taiga&#x000A;POSTGRES_PASSWORD: taiga</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>POSTGRES_DB: taiga&#x000A;POSTGRES_USER: taiga&#x000A;POSTGRES_PASSWORD: taiga</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, you can also configure <code>POSTGRES_PORT</code> in <code>taiga-back</code>. Defaults to '5432'.</p>
</div>
<div class="paragraph">
<div class="title">Taiga Settings</div>
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="paragraph">
<p>The default configuration assumes Taiga is being served in a <strong>subdomain</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>TAIGA_SECRET_KEY: <span class="tok-s2">&quot;taiga-back-secret-key&quot;</span>&#x000A;TAIGA_SITES_SCHEME: <span class="tok-s2">&quot;https&quot;</span>&#x000A;TAIGA_SITES_DOMAIN: <span class="tok-s2">&quot;taiga.mycompany.com&quot;</span>&#x000A;TAIGA_SUBPATH: <span class="tok-s2">&quot;&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If Taiga is being served in a <strong>subpath</strong> instead of a subdomain, the configuration should be something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>TAIGA_SECRET_KEY: <span class="tok-s2">&quot;taiga-back-secret-key&quot;</span>&#x000A;TAIGA_SITES_SCHEME: <span class="tok-s2">&quot;https&quot;</span>&#x000A;TAIGA_SITES_DOMAIN: <span class="tok-s2">&quot;mycompany.com&quot;</span>&#x000A;TAIGA_SUBPATH: <span class="tok-s2">&quot;/taiga&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, it&#8217;s necessary to do some configurations in <code>taiga-front</code> as well.</p>
</div>
<div class="paragraph">
<p><strong>Service: taiga-front</strong></p>
</div>
<div class="paragraph">
<p>The default configuration assumes Taiga is being served in a <strong>subdomain</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>TAIGA_URL: <span class="tok-s2">&quot;https://taiga.mycompany.com&quot;</span>&#x000A;TAIGA_WEBSOCKETS_URL: <span class="tok-s2">&quot;wss://taiga.mycompany.com&quot;</span>&#x000A;TAIGA_SUBPATH: <span class="tok-s2">&quot;&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If Taiga is being served in a <strong>subpath</strong> instead of a subdomain, the configuration should be something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>TAIGA_URL: <span class="tok-s2">&quot;https://mycompany.com&quot;</span>&#x000A;TAIGA_WEBSOCKETS_URL: <span class="tok-s2">&quot;wss://mycompany.com&quot;</span>&#x000A;TAIGA_SUBPATH: <span class="tok-s2">&quot;/taiga&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-events</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>TAIGA_SECRET_KEY: <span class="tok-s2">&quot;taiga-back-secret-key&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-protected</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>SECRET_KEY: <span class="tok-s2">&quot;taiga-back-secret-key&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>TAIGA_SECRET_KEY</code> or <code>SECRET_KEY</code> is the secret key of Taiga. Should be the same as this var in <code>taiga-back</code>, <code>taiga-events</code> and <code>taiga-protected</code>.
<code>TAIGA_URL</code> in front service is where this Taiga instance should be served. It should be the same as <code>TAIGA_SITES_SCHEME://TAIGA_SITES_DOMAIN</code>.
<code>TAIGA_WEBSOCKETS_URL</code> is used to connect to the events. This should have the same value as <code>wss://TAIGA_SITES_DOMAIN</code>, ie: wss://taiga.mycompany.com.</p>
</div>
<div class="paragraph">
<div class="title">Session Settings</div>
<p>Taiga doesn&#8217;t use session cookies in its API as it stateless. However, the Django Admin (<code>/admin/</code>) uses session cookie for authentication. By default, Taiga is configured to work behind HTTPS. If you&#8217;re using HTTP (despite the strong recommendations against it), you&#8217;ll need to configure the following environment variables so you can access the Admin:</p>
</div>
<div class="paragraph">
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>SESSION_COOKIE_SECURE: <span class="tok-s2">&quot;False&quot;</span>&#x000A;CSRF_COOKIE_SECURE: <span class="tok-s2">&quot;False&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>More info about those variables can be found <a href="https://docs.djangoproject.com/en/3.1/ref/settings/#csrf-cookie-secure">here</a>.</p>
</div>
<div class="paragraph">
<div class="title">Email Settings</div>
<p>By default, email is configured with the <strong>console</strong> backend, which means that the emails will be shown in the stdout. If you have an smtp service, uncomment the "Email settings" section in <code>docker-compose.yml</code> and configure those environment variables:</p>
</div>
<div class="paragraph">
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>EMAIL_BACKEND: <span class="tok-s2">&quot;django.core.mail.backends.smtp.EmailBackend&quot;</span>&#x000A;DEFAULT_FROM_EMAIL: <span class="tok-s2">&quot;no-reply@mycompany.com&quot;</span>&#x000A;EMAIL_HOST: <span class="tok-s2">&quot;smtp.host.mycompany.com&quot;</span>&#x000A;EMAIL_PORT: <span class="tok-m">587</span>&#x000A;EMAIL_HOST_USER: <span class="tok-s2">&quot;user&quot;</span>&#x000A;EMAIL_HOST_PASSWORD: <span class="tok-s2">&quot;password&quot;</span>&#x000A;EMAIL_USE_TLS: <span class="tok-s2">&quot;True&quot;</span>&#x000A;EMAIL_USE_SSL: <span class="tok-s2">&quot;True&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Uncomment <code>EMAIL_BACKEND</code> variable, but do not modify unless you know what you&#8217;re doing.</p>
</div>
<div class="paragraph">
<div class="title">Telemetry Settings</div>
<p>Telemetry anonymous data is collected in order to learn about the use of Taiga and improve the platform based on real scenarios.</p>
</div>
<div class="paragraph">
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_TELEMETRY: <span class="tok-s2">&quot;True&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can opt out by setting this variable to "False". By default is "True".</p>
</div>
<div class="paragraph">
<div class="title">Rabbit settings</div>
<p>These variables are used to leave messages in the rabbitmq services. These variables should be the same as in <code>taiga-back</code>, <code>taiga-async</code>, <code>taiga-events</code>, <code>taiga-async-rabbitmq</code> and <code>taiga-events-rabbitmq</code>.</p>
</div>
<div class="paragraph">
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>RABBITMQ_USER: taiga&#x000A;RABBITMQ_PASS: taiga</code></pre>
</div>
</div>
<div class="paragraph">
<p>Two other variables <code>EVENTS_PUSH_BACKEND_URL</code> and <code>CELERY_BROKER_URL</code> can also be used to set the events push backend URL and celery broker URL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>EVENTS_PUSH_BACKEND_URL: <span class="tok-s2">&quot;amqp://taiga:taiga@taiga-events-rabbitmq:5672/taiga&quot;</span>&#x000A;CELERY_BROKER_URL: <span class="tok-s2">&quot;amqp://taiga:taiga@taiga-async-rabbitmq:5672/taiga&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-events</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>RABBITMQ_USER: taiga&#x000A;RABBITMQ_PASS: taiga</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-async-rabbitmq</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>RABBITMQ_ERLANG_COOKIE: secret-erlang-cookie&#x000A;RABBITMQ_DEFAULT_USER: taiga&#x000A;RABBITMQ_DEFAULT_PASS: taiga&#x000A;RABBITMQ_DEFAULT_VHOST: taiga</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-events-rabbitmq</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>RABBITMQ_ERLANG_COOKIE: secret-erlang-cookie&#x000A;RABBITMQ_DEFAULT_USER: taiga&#x000A;RABBITMQ_DEFAULT_PASS: taiga&#x000A;RABBITMQ_DEFAULT_VHOST: taiga</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Taiga protected settings</div>
<p><strong>Service: taiga-protected</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>MAX_AGE: <span class="tok-m">360</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The attachments will be accesible with a token during MAX_AGE (in seconds). After that, the token will expire.</p>
</div>
</div>
<div class="sect2">
<h3 id="_customisation">1.5. Customisation</h3>
<div class="paragraph">
<p>All these features are disabled by default. You should add the corresponding environment variables with a proper value to enable them.</p>
</div>
<div class="paragraph">
<div class="title">Registration Settings</div>
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>PUBLIC_REGISTER_ENABLED: <span class="tok-s2">&quot;True&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-front</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>PUBLIC_REGISTER_ENABLED: <span class="tok-s2">&quot;true&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to allow a public register, configure this variable to "True". By default is "False". Should be the same as this var in <code>taiga-front</code> and <code>taiga-back</code>.</p>
</div>
<div class="paragraph">
<p><strong>Important</strong>: Taiga (in its default configuration) disables both Gitlab or Github oauth buttons whenever the public registration option hasn&#8217;t been activated. To be able to use Github/ Gitlab login/registration, make sure you have public registration activated on your Taiga instance.</p>
</div>
<div class="paragraph">
<div class="title">Github settings</div>
<p>Used for login with Github.</p>
</div>
<div class="paragraph">
<p>Follow the <a href="https://docs.github.com/en/developers/apps/building-oauth-apps/creating-an-oauth-app">documentation</a> in Github, when save application Github displays the ID and Secret.</p>
</div>
<div class="paragraph">
<p>Set variables in docker-compose.yml:</p>
</div>
<div class="paragraph">
<p><strong>Note</strong> <code>ENABLE_GITHUB_AUTH</code> and <code>GITHUB_API_CLIENT_ID / GITHUB_CLIENT_ID</code> should have the same value in <code>taiga-back</code> and <code>taiga-front</code> services.</p>
</div>
<div class="paragraph">
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_GITHUB_AUTH: <span class="tok-s2">&quot;True&quot;</span>&#x000A;GITHUB_API_CLIENT_ID: <span class="tok-s2">&quot;github-client-id&quot;</span>&#x000A;GITHUB_API_CLIENT_SECRET: <span class="tok-s2">&quot;github-client-secret&quot;</span>&#x000A;PUBLIC_REGISTER_ENABLED: <span class="tok-s2">&quot;True&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-front</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_GITHUB_AUTH: <span class="tok-s2">&quot;true&quot;</span>&#x000A;GITHUB_CLIENT_ID: <span class="tok-s2">&quot;github-client-id&quot;</span>&#x000A;PUBLIC_REGISTER_ENABLED: <span class="tok-s2">&quot;true&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Gitlab settings</div>
<p>Used for login with GitLab.</p>
</div>
<div class="paragraph">
<p>Follow the <a href="https://docs.gitlab.com/ee/integration/oauth_provider.html">documentation</a> in Gitlab, when save application GitLab displays the ID and Secret.</p>
</div>
<div class="paragraph">
<p>Set variables in docker-compose.yml:</p>
</div>
<div class="paragraph">
<p><strong>Note</strong> <code>ENABLE_GITLAB_AUTH</code>, <code>GITLAB_API_CLIENT_ID / GITLAB_CLIENT_ID</code> and <code>GITLAB_URL</code> should have the same value in <code>taiga-back</code> and <code>taiga-front</code> services.</p>
</div>
<div class="paragraph">
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_GITLAB_AUTH: <span class="tok-s2">&quot;True&quot;</span>&#x000A;GITLAB_API_CLIENT_ID: <span class="tok-s2">&quot;gitlab-client-id&quot;</span>&#x000A;GITLAB_API_CLIENT_SECRET: <span class="tok-s2">&quot;gitlab-client-secret&quot;</span>&#x000A;GITLAB_URL: <span class="tok-s2">&quot;gitlab-url&quot;</span>&#x000A;PUBLIC_REGISTER_ENABLED: <span class="tok-s2">&quot;True&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-front</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_GITLAB_AUTH: <span class="tok-s2">&quot;true&quot;</span>&#x000A;GITLAB_CLIENT_ID: <span class="tok-s2">&quot;gitlab-client-id&quot;</span>&#x000A;GITLAB_URL: <span class="tok-s2">&quot;gitlab-url&quot;</span>&#x000A;PUBLIC_REGISTER_ENABLED: <span class="tok-s2">&quot;true&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Slack Settings</div>
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_SLACK: <span class="tok-s2">&quot;True&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-front</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_SLACK: <span class="tok-s2">&quot;true&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Enable Slack integration in your Taiga instance. By default is "False". Should have the same value as this variable in <code>taiga-front</code> and <code>taiga-back</code>.</p>
</div>
<div class="paragraph">
<div class="title">Github importer</div>
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_GITHUB_IMPORTER: <span class="tok-s2">&quot;True&quot;</span>&#x000A;GITHUB_IMPORTER_CLIENT_ID: <span class="tok-s2">&quot;client-id-from-github&quot;</span>&#x000A;GITHUB_IMPORTER_CLIENT_SECRET: <span class="tok-s2">&quot;client-secret-from-github&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-front</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_GITHUB_IMPORTER: <span class="tok-s2">&quot;true&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Jira importer</div>
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_JIRA_IMPORTER: <span class="tok-s2">&quot;True&quot;</span>&#x000A;JIRA_IMPORTER_CONSUMER_KEY: <span class="tok-s2">&quot;consumer-key-from-jira&quot;</span>&#x000A;JIRA_IMPORTER_CERT: <span class="tok-s2">&quot;cert-from-jira&quot;</span>&#x000A;JIRA_IMPORTER_PUB_CERT: <span class="tok-s2">&quot;pub-cert-from-jira&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-front</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_JIRA_IMPORTER: <span class="tok-s2">&quot;true&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Trello importer</div>
<p><strong>Service: taiga-back</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_TRELLO_IMPORTER: <span class="tok-s2">&quot;True&quot;</span>&#x000A;TRELLO_IMPORTER_API_KEY: <span class="tok-s2">&quot;api-key-from-trello&quot;</span>&#x000A;TRELLO_IMPORTER_SECRET_KEY: <span class="tok-s2">&quot;secret-key-from-trello&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Service: taiga-front</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>ENABLE_TRELLO_IMPORTER: <span class="tok-s2">&quot;true&quot;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_configuration_and_customisation">1.6. Advanced configuration and customisation</h3>
<div class="paragraph">
<p>In an advanced configuration, you ignore the environment variables in <code>docker-compose.yml</code> or <code>docker-compose-inits.yml</code>.</p>
</div>
<div class="paragraph">
<div class="title">Map a <code>config.py</code> file</div>
<p>From <a href="https://github.com/kaleidos-ventures/taiga-back">taiga-back</a> download the file <code>settings/config.py.prod.example</code> and rename it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>mv settings/config.py.prod.example settings/config.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit <code>config.py</code> with your own configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Taiga secret key: <strong>it&#8217;s important</strong> to change it. It must have the same value as the secret key in <code>taiga-events</code> and <code>taiga-protected</code></p>
</li>
<li>
<p>Taiga urls: configure where Taiga would be served using <code>TAIGA_URL</code>, <code>SITES</code> and <code>FORCE_SCRIPT_NAME</code> (see examples below)</p>
</li>
<li>
<p>Connection to PostgreSQL; check <code>DATABASES</code> section in the file</p>
</li>
<li>
<p>Connection to RabbitMQ for <code>taiga-events</code>; check "EVENTS" section in the file</p>
</li>
<li>
<p>Connection to RabbitMQ for <code>taiga-async</code>; check "TAIGA ASYNC" section in the file</p>
</li>
<li>
<p>Credentials for email; check "EMAIL" section in the file</p>
</li>
<li>
<p>Enable/disable anonymous telemetry; check "TELEMETRY" section in the file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subdomain</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nv">TAIGA_SITES_SCHEME</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;https&quot;</span>&#x000A;<span class="tok-nv">TAIGA_SITES_DOMAIN</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;taiga.mycompany.com&quot;</span>&#x000A;<span class="tok-nv">FORCE_SCRIPT_NAME</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subpath</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nv">TAIGA_SITES_SCHEME</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;https&quot;</span>&#x000A;<span class="tok-nv">TAIGA_SITES_DOMAIN</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;taiga.mycompany.com&quot;</span>&#x000A;<span class="tok-nv">FORCE_SCRIPT_NAME</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;/taiga&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Check as well the rest of the configuration if you need to enable some advanced features.</p>
</div>
<div class="paragraph">
<p>Map the file into <code>/taiga-back/settings/config.py</code>. Have in mind that you have to map it both in <code>docker-compose.yml</code> and <code>docker-compose-inits.yml</code>. You can check the <code>x-volumes</code> section in docker-compose.yml with an example.</p>
</div>
<div class="paragraph">
<div class="title">Map a <code>conf.json</code> file</div>
<p>From <a href="https://github.com/kaleidos-ventures/taiga-front">taiga-front</a> download the file <code>dist/conf.example.json</code> and rename it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>mv dist/conf.example.json dist/conf.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit it with your own configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Taiga urls: configure where Taiga would be served using <code>api</code>, <code>eventsUrl</code> and <code>baseHref</code> (see examples below)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subdomain</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-c1"># conf.json</span>&#x000A;<span class="tok-o">{</span>&#x000A;    <span class="tok-s2">&quot;api&quot;</span>: <span class="tok-s2">&quot;https://taiga.mycompany.com/api/v1/&quot;</span>,&#x000A;    <span class="tok-s2">&quot;eventsUrl&quot;</span>: <span class="tok-s2">&quot;wss://taiga.mycompany.com/events&quot;</span>,&#x000A;    <span class="tok-s2">&quot;baseHref&quot;</span>: <span class="tok-s2">&quot;/&quot;</span>,</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subpath</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-c1"># conf.json</span>&#x000A;<span class="tok-o">{</span>&#x000A;    <span class="tok-s2">&quot;api&quot;</span>: <span class="tok-s2">&quot;https://mycompany.com/taiga/api/v1/&quot;</span>,&#x000A;    <span class="tok-s2">&quot;eventsUrl&quot;</span>: <span class="tok-s2">&quot;wss://mycompany.com/taiga/events&quot;</span>,&#x000A;    <span class="tok-s2">&quot;baseHref&quot;</span>: <span class="tok-s2">&quot;/taiga/&quot;</span>,</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check as well the rest of the configuration if you need to enable some advanced features.</p>
</div>
<div class="paragraph">
<p>Map the file into <code>/taiga-front/dist/config.py</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configure_an_admin_user">1.7. Configure an admin user</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sh"><span></span>$ docker-compose up -d&#x000A;&#x000A;$ docker-compose -f docker-compose.yml -f docker-compose-inits.yml run --rm taiga-manage createsuperuser</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_up_and_running">1.8. Up and running</h3>
<div class="paragraph">
<p>Once everything has been installed, launch all the services and check the result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>$ docker-compose up -d</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configure_the_proxy">1.9. Configure the proxy</h3>
<div class="paragraph">
<p>Your host configuration needs to make a proxy to <code><a class="bare" href="http://localhost:9000">http://localhost:9000</a></code>.</p>
</div>
<div class="paragraph">
<p>If Taiga is being served in a <strong>subdomain</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>server <span class="tok-o">{</span>&#x000A;  server_name taiga.mycompany.com<span class="tok-p">;</span>&#x000A;&#x000A;  location / <span class="tok-o">{</span>&#x000A;    proxy_set_header Host <span class="tok-nv">$http_host</span><span class="tok-p">;</span>&#x000A;    proxy_set_header X-Real-IP <span class="tok-nv">$remote_addr</span><span class="tok-p">;</span>&#x000A;    proxy_set_header X-Scheme <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;    proxy_set_header X-Forwarded-Proto <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;    proxy_set_header X-Forwarded-For <span class="tok-nv">$proxy_add_x_forwarded_for</span><span class="tok-p">;</span>&#x000A;    proxy_redirect off<span class="tok-p">;</span>&#x000A;    proxy_pass http://localhost:9000/<span class="tok-p">;</span>&#x000A;  <span class="tok-o">}</span>&#x000A;&#x000A;  <span class="tok-c1"># Events</span>&#x000A;  location /events <span class="tok-o">{</span>&#x000A;      proxy_pass http://localhost:9000/events<span class="tok-p">;</span>&#x000A;      proxy_http_version <span class="tok-m">1</span>.1<span class="tok-p">;</span>&#x000A;      proxy_set_header Upgrade <span class="tok-nv">$http_upgrade</span><span class="tok-p">;</span>&#x000A;      proxy_set_header Connection <span class="tok-s2">&quot;upgrade&quot;</span><span class="tok-p">;</span>&#x000A;      proxy_set_header Host <span class="tok-nv">$host</span><span class="tok-p">;</span>&#x000A;      proxy_connect_timeout 7d<span class="tok-p">;</span>&#x000A;      proxy_send_timeout 7d<span class="tok-p">;</span>&#x000A;      proxy_read_timeout 7d<span class="tok-p">;</span>&#x000A;  <span class="tok-o">}</span>&#x000A;&#x000A;  <span class="tok-c1"># TLS: Configure your TLS following the best practices inside your company</span>&#x000A;  <span class="tok-c1"># Logs and other configurations</span>&#x000A;<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If Taiga is being served in a <strong>subpath</strong> instead of a subdomain, the configuration should be something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>server <span class="tok-o">{</span>&#x000A;  server_name mycompany.com<span class="tok-p">;</span>&#x000A;&#x000A;  location /taiga/ <span class="tok-o">{</span>&#x000A;    proxy_set_header Host <span class="tok-nv">$http_host</span><span class="tok-p">;</span>&#x000A;    proxy_set_header X-Real-IP <span class="tok-nv">$remote_addr</span><span class="tok-p">;</span>&#x000A;    proxy_set_header X-Scheme <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;    proxy_set_header X-Forwarded-Proto <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;    proxy_set_header X-Forwarded-For <span class="tok-nv">$proxy_add_x_forwarded_for</span><span class="tok-p">;</span>&#x000A;    proxy_redirect off<span class="tok-p">;</span>&#x000A;    proxy_pass http://localhost:9000/<span class="tok-p">;</span>&#x000A;  <span class="tok-o">}</span>&#x000A;&#x000A;  <span class="tok-c1"># Events</span>&#x000A;  location /taiga/events <span class="tok-o">{</span>&#x000A;      proxy_pass http://localhost:9000/events<span class="tok-p">;</span>&#x000A;      proxy_http_version <span class="tok-m">1</span>.1<span class="tok-p">;</span>&#x000A;      proxy_set_header Upgrade <span class="tok-nv">$http_upgrade</span><span class="tok-p">;</span>&#x000A;      proxy_set_header Connection <span class="tok-s2">&quot;upgrade&quot;</span><span class="tok-p">;</span>&#x000A;      proxy_set_header Host <span class="tok-nv">$host</span><span class="tok-p">;</span>&#x000A;      proxy_connect_timeout 7d<span class="tok-p">;</span>&#x000A;      proxy_send_timeout 7d<span class="tok-p">;</span>&#x000A;      proxy_read_timeout 7d<span class="tok-p">;</span>&#x000A;  <span class="tok-o">}</span>&#x000A;&#x000A;  <span class="tok-c1"># TLS: Configure your TLS following the best practices inside your company</span>&#x000A;  <span class="tok-c1"># Logs and other configurations</span>&#x000A;<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_change_between_subpath_and_subdomain">1.10. Change between subpath and subdomain</h3>
<div class="paragraph">
<p>If you&#8217;re changing Taiga configuration from default subdomain (<a class="bare" href="https://taiga.mycompany.com">https://taiga.mycompany.com</a>) to subpath (<a class="bare" href="http://mycompany.com/subpath">http://mycompany.com/subpath</a>) or vice versa, on top of adjusting the configuration as said above, you should consider changing the TAIGA_SECRET_KEY so the refresh works properly for the end user.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setup-prod-from-source-code">2. From source code</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction">2.1. Introduction</h3>
<div class="paragraph">
<p>This document explains how to deploy a full Taiga service for a production environment. A Taiga service consists of multiple Taiga modules which altogether make the Taiga platform.</p>
</div>
<div class="paragraph">
<p>The standard Taiga platform consists of several modules, and each one has its own dependencies both at compile time and runtime:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>taiga-back</strong> (API)</p>
</li>
<li>
<p><strong>taiga-async-tasks</strong> (async tasks, like bulk email or exports generation)</p>
</li>
<li>
<p><strong>taiga-front-dist</strong> (frontend)</p>
</li>
<li>
<p><strong>taiga-events</strong> (websockets gateway)</p>
</li>
<li>
<p><strong>taiga-protected</strong> (protected attachments)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each module can be run on a unique machine or all of them can be installed to a different machine as well. In this tutorial we will setup everything on a single machine. This type of setup should suffice for small/medium production environments with low traffic.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pre_requisites">2.2. Pre-requisites</h3>
<div class="ulist">
<ul>
<li>
<p>A clean, recently updated <strong>Ubuntu 20.04</strong> image</p>
</li>
<li>
<p>At least 1GB RAM</p>
</li>
<li>
<p>At least 20GB of free storage</p>
</li>
<li>
<p>TLS certificate to serve Taiga with HTTPS</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Taiga installation must be done with a "regular" user, never with root!</strong></p>
</div>
<div class="paragraph">
<p>During the tutorial, the following conditions are assumed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>IP:</strong> <code>80.88.23.45</code></p>
</li>
<li>
<p><strong>Hostname:</strong> <code>taiga.mycompany.com</code> (which points to 80.88.23.45)</p>
</li>
<li>
<p><strong>Username:</strong> <code>taiga</code></p>
</li>
<li>
<p><strong>Working directory:</strong> <code>/home/taiga/</code> (default for user <code>taiga</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dependencies">2.3. Dependencies</h3>
<div class="paragraph">
<p>The typical Taiga setup described in this documentation depends on the following standalone major software installed separately from Taiga:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.python.org/">Python 3</a> - taiga-back, taiga-async and taiga-protected (Python &gt;= 3.6)</p>
</li>
<li>
<p><a href="https://nodejs.org/en">Node.js</a> - taiga-events</p>
</li>
<li>
<p><a href="https://www.nginx.com/">NGINX</a> - web server and reverse proxy</p>
</li>
<li>
<p><a href="https://www.postgresql.org">PostgreSQL</a> - database (PostgreSQL &gt;= 9.4)</p>
</li>
<li>
<p><a href="https://www.rabbitmq.com">RabbitMQ</a> - message broker, for taiga-async and taiga-events</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_install_system_dependencies">2.4. Install System Dependencies</h3>
<div class="paragraph">
<p>Install the following dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo apt-get update&#x000A;sudo apt-get install -y build-essential binutils-doc autoconf flex bison libjpeg-dev&#x000A;sudo apt-get install -y libfreetype6-dev zlib1g-dev libzmq3-dev libgdbm-dev libncurses5-dev&#x000A;sudo apt-get install -y automake libtool curl git tmux gettext&#x000A;sudo apt-get install -y nginx&#x000A;sudo apt-get install -y rabbitmq-server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install PostgreSQL and remember to start the database server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo apt-get install -y postgresql-12 postgresql-contrib-12 postgresql-doc-12 postgresql-server-dev-12&#x000A;sudo pg_ctlcluster <span class="tok-m">12</span> main start</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Python 3 must be installed along with a few third-party libraries:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo apt-get install -y python3 python3-pip python3-dev python3-venv&#x000A;sudo apt-get install -y libxml2-dev libxslt-dev&#x000A;sudo apt-get install -y libssl-dev libffi-dev</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Install Node.js</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>curl -sL https://deb.nodesource.com/setup_12.x <span class="tok-p">|</span> sudo -E bash -&#x000A;sudo apt-get install -y nodejs</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_user_taiga">2.5. Create a user <code>taiga</code></h3>
<div class="listingblock">
<div class="title">Create a user with root privileges named <code>taiga</code>:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo adduser taiga&#x000A;sudo adduser taiga sudo&#x000A;sudo su taiga&#x000A;<span class="tok-nb">cd</span> ~</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title"></div>
</td>
<td class="content">
Do <strong>not</strong> change back to the root user (<code>uid=0</code>) at this point. Taiga deployment must be finished with the <code>taiga</code> user!
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_postgresql_and_rabbitmq">2.6. Configuring PostgreSQL and RabbitMQ</h3>
<div class="listingblock">
<div class="title">Configure PostgreSQL with the initial user and database:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo -u postgres createuser taiga --interactive --pwprompt&#x000A;sudo -u postgres createdb taiga -O taiga --encoding<span class="tok-o">=</span><span class="tok-s1">&#39;utf-8&#39;</span> --locale<span class="tok-o">=</span>en_US.utf8 --template<span class="tok-o">=</span>template0</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create a rabbitmquser named <code>taiga</code> and a virtualhost for RabbitMQ (taiga-events and async tasks)</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo rabbitmqctl add_user rabbitmquser rabbitmqpassword&#x000A;sudo rabbitmqctl add_vhost taiga&#x000A;sudo rabbitmqctl set_permissions -p taiga rabbitmquser <span class="tok-s2">&quot;.*&quot;</span> <span class="tok-s2">&quot;.*&quot;</span> <span class="tok-s2">&quot;.*&quot;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title"></div>
</td>
<td class="content">
As the password will be used inside the Postgresql URL later, use only web safe characters: a-z, A-Z, 0-9, and  - . _ ~
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="taiga-back">2.7. Backend Setup</h3>
<div class="paragraph">
<p>This section describes the installation and configuration of the <strong>taiga-back</strong> and <strong>taiga-async</strong> modules which serves the REST API endpoints and the async tasks respectively.</p>
</div>
<div class="listingblock">
<div class="title">Get the code:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nb">cd</span> ~&#x000A;git clone https://github.com/kaleidos-ventures/taiga-back.git taiga-back&#x000A;<span class="tok-nb">cd</span> taiga-back&#x000A;git checkout stable</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create a virtualenv:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>python3 -m venv .venv --prompt taiga-back&#x000A;<span class="tok-nb">source</span> .venv/bin/activate&#x000A;<span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> pip install --upgrade pip wheel</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Install all Python dependencies:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> pip install -r requirements.txt</code></pre>
</div>
</div>
<div class="listingblock" id="add_contrib_protected">
<div class="title">Install taiga-contrib-protected:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> pip install git+https://github.com/kaleidos-ventures/taiga-contrib-protected.git@stable#egg<span class="tok-o">=</span>taiga-contrib-protected</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Settings file:</div>
<p>Create a <code>settings/config.py</code> file based on the example provided:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>cp settings/config.py.prod.example settings/config.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit <code>config.py</code> and configure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Taiga secret key: <strong>it&#8217;s important</strong> to change it. It must have the same value as the secret key in <code>taiga-events</code> and <code>taiga-protected</code></p>
</li>
<li>
<p>Taiga urls: configure where Taiga would be served using <code>TAIGA_URL</code>, <code>SITES</code> and <code>FORCE_SCRIPT_NAME</code> (see examples below)</p>
</li>
<li>
<p>Connection to PostgreSQL; check <code>DATABASES</code> section in the file</p>
</li>
<li>
<p>Connection to RabbitMQ for <code>taiga-events</code>; check "EVENTS" section in the file</p>
</li>
<li>
<p>Connection to RabbitMQ for <code>taiga-async</code>; check "TAIGA ASYNC" section in the file</p>
</li>
<li>
<p>Credentials for email; check "EMAIL" section in the file</p>
</li>
<li>
<p>Enable/disable anonymous telemetry; check "TELEMETRY" section in the file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subdomain</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nv">TAIGA_SITES_SCHEME</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;https&quot;</span>&#x000A;<span class="tok-nv">TAIGA_SITES_DOMAIN</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;taiga.mycompany.com&quot;</span>&#x000A;<span class="tok-nv">FORCE_SCRIPT_NAME</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subpath</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nv">TAIGA_SITES_SCHEME</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;https&quot;</span>&#x000A;<span class="tok-nv">TAIGA_SITES_DOMAIN</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;taiga.mycompany.com&quot;</span>&#x000A;<span class="tok-nv">FORCE_SCRIPT_NAME</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;/taiga&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Check as well the rest of the configuration if you need to enable some advanced features.</p>
</div>
<div class="listingblock">
<div class="title">Execute all migrations to populate the database with basic necessary initial data:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nb">source</span> .venv/bin/activate&#x000A;<span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> <span class="tok-nv">DJANGO_SETTINGS_MODULE</span><span class="tok-o">=</span>settings.config python manage.py migrate --noinput&#x000A;<span class="tok-c1"># create an administrator with strong password</span>&#x000A;<span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> <span class="tok-nv">CELERY_ENABLED</span><span class="tok-o">=</span>False <span class="tok-nv">DJANGO_SETTINGS_MODULE</span><span class="tok-o">=</span>settings.config python manage.py createsuperuser&#x000A;<span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> <span class="tok-nv">DJANGO_SETTINGS_MODULE</span><span class="tok-o">=</span>settings.config python manage.py loaddata initial_project_templates&#x000A;<span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> <span class="tok-nv">DJANGO_SETTINGS_MODULE</span><span class="tok-o">=</span>settings.config python manage.py compilemessages&#x000A;<span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> <span class="tok-nv">DJANGO_SETTINGS_MODULE</span><span class="tok-o">=</span>settings.config python manage.py collectstatic --noinput</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>OPTIONAL:</strong>
If you would like to have some example data loaded into Taiga, execute the following command to populate the database with sample projects and random data (useful for demos):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> <span class="tok-nv">CELERY_ENABLED</span><span class="tok-o">=</span>False <span class="tok-nv">DJANGO_SETTINGS_MODULE</span><span class="tok-o">=</span>settings.config python manage.py sample_data</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>To make sure that everything works, execute the following commands to run the backend in development mode for a quick test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nb">source</span> .venv/bin/activate&#x000A;<span class="tok-o">(</span>taiga-back<span class="tok-o">)</span> <span class="tok-nv">DJANGO_SETTINGS_MODULE</span><span class="tok-o">=</span>settings.config python manage.py runserver</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open your browser at <a class="bare" href="http://localhost:8000/api/v1/">http://localhost:8000/api/v1/</a>. If your configuration is correct, you will see a JSON representation of REST API endpoints.
Open your browser at <a class="bare" href="http://localhost:8000/admin/">http://localhost:8000/admin/</a> and log-in with your admin credentials.
Stop the developtment server (Ctrl+C) before continuing.</p>
</div>
</div>
<div class="sect2">
<h3 id="taiga-front">2.8. Frontend Setup</h3>
<div class="paragraph">
<p>This section describes the installation and configuration of the <strong>taiga-front</strong> module which serves the frontend application.</p>
</div>
<div class="listingblock">
<div class="title">Get the code</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nb">cd</span> ~&#x000A;git clone https://github.com/kaleidos-ventures/taiga-front-dist.git taiga-front-dist&#x000A;<span class="tok-nb">cd</span> taiga-front-dist&#x000A;git checkout stable</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Copy the example config file:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>cp ~/taiga-front-dist/dist/conf.example.json ~/taiga-front-dist/dist/conf.json</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Edit with your own configuration:</div>
<ul>
<li>
<p>Taiga urls: configure where Taiga would be served using <code>api</code>, <code>eventsUrl</code> and <code>baseHref</code> (see examples below)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subdomain</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-o">{</span>&#x000A;    <span class="tok-s2">&quot;api&quot;</span>: <span class="tok-s2">&quot;https://taiga.mycompany.com/api/v1/&quot;</span>,&#x000A;    <span class="tok-s2">&quot;eventsUrl&quot;</span>: <span class="tok-s2">&quot;wss://taiga.mycompany.com/events&quot;</span>,&#x000A;    <span class="tok-s2">&quot;baseHref&quot;</span>: <span class="tok-s2">&quot;/&quot;</span>,</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subpath</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-o">{</span>&#x000A;    <span class="tok-s2">&quot;api&quot;</span>: <span class="tok-s2">&quot;https://mycompany.com/taiga/api/v1/&quot;</span>,&#x000A;    <span class="tok-s2">&quot;eventsUrl&quot;</span>: <span class="tok-s2">&quot;wss://mycompany.com/taiga/events&quot;</span>,&#x000A;    <span class="tok-s2">&quot;baseHref&quot;</span>: <span class="tok-s2">&quot;/taiga/&quot;</span>,</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you&#8217;re using Taiga in <strong>subpath</strong>, you need to edit <code>index.html</code> as well; from:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>&lt;base <span class="tok-nv">href</span><span class="tok-o">=</span><span class="tok-s2">&quot;/&quot;</span> /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>&lt;base <span class="tok-nv">href</span><span class="tok-o">=</span><span class="tok-s2">&quot;/taiga/&quot;</span> /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check as well the rest of the configuration if you need to enable some advanced features.</p>
</div>
</div>
<div class="sect2">
<h3 id="taiga-events">2.9. Events Setup</h3>
<div class="paragraph">
<p>This section provides instructions on downloading <strong>taiga-events</strong>, installing its dependencies and configuring it for use in production:</p>
</div>
<div class="paragraph">
<p>The <strong>taiga-events</strong> module is the Taiga websocket server which allows <strong>taiga-front</strong> to show realtime changes in the backlog, taskboard, kanban and issues listing.</p>
</div>
<div class="listingblock">
<div class="title">Get the code:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nb">cd</span> ~&#x000A;git clone https://github.com/kaleidos-ventures/taiga-events.git taiga-events&#x000A;<span class="tok-nb">cd</span> taiga-events&#x000A;git checkout stable</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Install the required JavaScript dependencies:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>npm install</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create <code>.env</code> file based on the provided example.</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>cp .env.example .env</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Update it with your RabbitMQ URL and your unique secret key. Your final <code>.env</code> should look similar to the following example:</div>
<div class="content">
<pre class="pygments highlight"><code><span></span>RABBITMQ_URL=&quot;amqp://rabbitmquser:rabbitmqpassword@rabbitmqhost:5672/taiga&quot;&#x000A;SECRET=&quot;taiga-back-secret-key&quot;&#x000A;WEB_SOCKET_SERVER_PORT=8888&#x000A;APP_PORT=3023</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>secret</code> value in <code>.env</code> must be the same as the <code>SECRET_KEY</code> in <code>~/taiga-back/settings/config.py</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="install-protected">2.10. Taiga protected Setup</h3>
<div class="paragraph">
<p>This section describes the installation and configuration of the <strong>taiga-protected</strong> modules which protects the attachments from external downloads.</p>
</div>
<div class="listingblock">
<div class="title">Get the code:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nb">cd</span> ~&#x000A;git clone https://github.com/kaleidos-ventures/taiga-protected.git taiga-protected&#x000A;<span class="tok-nb">cd</span> taiga-protected&#x000A;git checkout stable</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create a virtualenv:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>python3 -m venv .venv --prompt taiga-protected&#x000A;<span class="tok-nb">source</span> .venv/bin/activate&#x000A;<span class="tok-o">(</span>taiga-protected<span class="tok-o">)</span> pip install --upgrade pip wheel</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Install all Python dependencies:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-o">(</span>taiga-protected<span class="tok-o">)</span> pip install -r requirements.txt</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Copy the example config file:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>cp ~/taiga-protected/env.sample ~/taiga-protected/.env</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subdomain</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nv">MAX_AGE</span><span class="tok-o">=</span><span class="tok-m">360</span>&#x000A;<span class="tok-nv">SECRET_KEY</span><span class="tok-o">=</span><span class="tok-s2">&quot;taiga-back-secret-key&quot;</span>&#x000A;<span class="tok-nv">TAIGA_SUBPATH</span><span class="tok-o">=</span><span class="tok-s2">&quot;&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Example to configure Taiga in <strong>subpath</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span><span class="tok-nv">MAX_AGE</span><span class="tok-o">=</span><span class="tok-m">360</span>&#x000A;<span class="tok-nv">SECRET_KEY</span><span class="tok-o">=</span><span class="tok-s2">&quot;taiga-back-secret-key&quot;</span>&#x000A;<span class="tok-nv">TAIGA_SUBPATH</span><span class="tok-o">=</span><span class="tok-s2">&quot;/taiga&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>SECRET_KEY</code> value in <code>.env</code> must be the same as the <code>TAIGA_SECRET_KEY</code> in <code>~/taiga-back/settings/config.py</code>.
The attachments will be accesible with a token during MAX_AGE (in seconds). After that, the token will expire.</p>
</div>
</div>
<div class="sect2">
<h3 id="start-taiga">2.11. Start Taiga</h3>
<div class="paragraph">
<p>Now it&#8217;s time to create the different systemd services to serve different modules of Taiga.</p>
</div>
<div class="listingblock" id="expose-taiga-back">
<div class="title">Create a new systemd file at <code>/etc/systemd/system/taiga.service</code> to run <strong>taiga-back</strong>:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="ini"><span></span><span class="tok-k">[Unit]</span>&#x000A;<span class="tok-na">Description</span><span class="tok-o">=</span><span class="tok-s">taiga_back</span>&#x000A;<span class="tok-na">After</span><span class="tok-o">=</span><span class="tok-s">network.target</span>&#x000A;&#x000A;<span class="tok-k">[Service]</span>&#x000A;<span class="tok-na">User</span><span class="tok-o">=</span><span class="tok-s">taiga</span>&#x000A;<span class="tok-na">WorkingDirectory</span><span class="tok-o">=</span><span class="tok-s">/home/taiga/taiga-back</span>&#x000A;<span class="tok-na">ExecStart</span><span class="tok-o">=</span><span class="tok-s">/home/taiga/taiga-back/.venv/bin/gunicorn --workers 4 --timeout 60 --log-level=info --access-logfile - --bind 0.0.0.0:8001 taiga.wsgi</span>&#x000A;<span class="tok-na">Restart</span><span class="tok-o">=</span><span class="tok-s">always</span>&#x000A;<span class="tok-na">RestartSec</span><span class="tok-o">=</span><span class="tok-s">3</span>&#x000A;&#x000A;<span class="tok-na">Environment</span><span class="tok-o">=</span><span class="tok-s">PYTHONUNBUFFERED=true</span>&#x000A;<span class="tok-na">Environment</span><span class="tok-o">=</span><span class="tok-s">DJANGO_SETTINGS_MODULE=settings.config</span>&#x000A;&#x000A;<span class="tok-k">[Install]</span>&#x000A;<span class="tok-na">WantedBy</span><span class="tok-o">=</span><span class="tok-s">default.target</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Reload the systemd daemon and start the <code>taiga</code> service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl daemon-reload&#x000A;sudo systemctl start taiga&#x000A;sudo systemctl <span class="tok-nb">enable</span> taiga</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">To verify that the service is running, execute the following command:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl status taiga</code></pre>
</div>
</div>
<div class="listingblock" id="expose-taiga-async">
<div class="title">Create a new systemd file at <code>/etc/systemd/system/taiga-async.service</code> to run <strong>taiga-async</strong>:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="ini"><span></span><span class="tok-k">[Unit]</span>&#x000A;<span class="tok-na">Description</span><span class="tok-o">=</span><span class="tok-s">taiga_async</span>&#x000A;<span class="tok-na">After</span><span class="tok-o">=</span><span class="tok-s">network.target</span>&#x000A;&#x000A;<span class="tok-k">[Service]</span>&#x000A;<span class="tok-na">User</span><span class="tok-o">=</span><span class="tok-s">taiga</span>&#x000A;<span class="tok-na">WorkingDirectory</span><span class="tok-o">=</span><span class="tok-s">/home/taiga/taiga-back</span>&#x000A;<span class="tok-na">ExecStart</span><span class="tok-o">=</span><span class="tok-s">/home/taiga/taiga-back/.venv/bin/celery -A taiga.celery worker -B --concurrency 4 -l INFO</span>&#x000A;<span class="tok-na">Restart</span><span class="tok-o">=</span><span class="tok-s">always</span>&#x000A;<span class="tok-na">RestartSec</span><span class="tok-o">=</span><span class="tok-s">3</span>&#x000A;<span class="tok-na">ExecStop</span><span class="tok-o">=</span><span class="tok-s">/bin/kill -s TERM $MAINPID</span>&#x000A;&#x000A;<span class="tok-na">Environment</span><span class="tok-o">=</span><span class="tok-s">PYTHONUNBUFFERED=true</span>&#x000A;<span class="tok-na">Environment</span><span class="tok-o">=</span><span class="tok-s">DJANGO_SETTINGS_MODULE=settings.config</span>&#x000A;&#x000A;<span class="tok-k">[Install]</span>&#x000A;<span class="tok-na">WantedBy</span><span class="tok-o">=</span><span class="tok-s">default.target</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Reload the systemd daemon and start the <code>taiga-async</code> service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl daemon-reload&#x000A;sudo systemctl start taiga-async&#x000A;sudo systemctl <span class="tok-nb">enable</span> taiga-async</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">To verify that the service is running, execute the following command:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl status taiga-async</code></pre>
</div>
</div>
<div class="listingblock" id="expose-taiga-events">
<div class="title">Create a new systemd file at <code>/etc/systemd/system/taiga-events.service</code> to run <strong>taiga-events</strong>:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="ini"><span></span><span class="tok-k">[Unit]</span>&#x000A;<span class="tok-na">Description</span><span class="tok-o">=</span><span class="tok-s">taiga_events</span>&#x000A;<span class="tok-na">After</span><span class="tok-o">=</span><span class="tok-s">network.target</span>&#x000A;&#x000A;<span class="tok-k">[Service]</span>&#x000A;<span class="tok-na">User</span><span class="tok-o">=</span><span class="tok-s">taiga</span>&#x000A;<span class="tok-na">WorkingDirectory</span><span class="tok-o">=</span><span class="tok-s">/home/taiga/taiga-events</span>&#x000A;<span class="tok-na">ExecStart</span><span class="tok-o">=</span><span class="tok-s">npm run start:production</span>&#x000A;<span class="tok-na">Restart</span><span class="tok-o">=</span><span class="tok-s">always</span>&#x000A;<span class="tok-na">RestartSec</span><span class="tok-o">=</span><span class="tok-s">3</span>&#x000A;&#x000A;<span class="tok-k">[Install]</span>&#x000A;<span class="tok-na">WantedBy</span><span class="tok-o">=</span><span class="tok-s">default.target</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Reload the systemd daemon and start the <code>taiga-events</code> service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl daemon-reload&#x000A;sudo systemctl start taiga-events&#x000A;sudo systemctl <span class="tok-nb">enable</span> taiga-events</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">To verify that the service is running, execute the following command:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl status taiga-events</code></pre>
</div>
</div>
<div class="listingblock" id="expose-taiga-protected">
<div class="title">Create a new systemd file at <code>/etc/systemd/system/taiga-protected.service</code> to run <strong>taiga-protected</strong>:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="ini"><span></span><span class="tok-k">[Unit]</span>&#x000A;<span class="tok-na">Description</span><span class="tok-o">=</span><span class="tok-s">taiga_protected</span>&#x000A;<span class="tok-na">After</span><span class="tok-o">=</span><span class="tok-s">network.target</span>&#x000A;&#x000A;<span class="tok-k">[Service]</span>&#x000A;<span class="tok-na">User</span><span class="tok-o">=</span><span class="tok-s">taiga</span>&#x000A;<span class="tok-na">WorkingDirectory</span><span class="tok-o">=</span><span class="tok-s">/home/taiga/taiga-protected</span>&#x000A;<span class="tok-na">ExecStart</span><span class="tok-o">=</span><span class="tok-s">/home/taiga/taiga-protected/.venv/bin/gunicorn --workers 4 --timeout 60 --log-level=info --access-logfile - --bind 0.0.0.0:8003 server:app</span>&#x000A;<span class="tok-na">Restart</span><span class="tok-o">=</span><span class="tok-s">always</span>&#x000A;<span class="tok-na">RestartSec</span><span class="tok-o">=</span><span class="tok-s">3</span>&#x000A;&#x000A;<span class="tok-na">Environment</span><span class="tok-o">=</span><span class="tok-s">PYTHONUNBUFFERED=true</span>&#x000A;&#x000A;<span class="tok-k">[Install]</span>&#x000A;<span class="tok-na">WantedBy</span><span class="tok-o">=</span><span class="tok-s">default.target</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Reload the systemd daemon and start the <code>taiga-protected</code> service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl daemon-reload&#x000A;sudo systemctl start taiga-protected&#x000A;sudo systemctl <span class="tok-nb">enable</span> taiga-protected</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">To verify that the service is running, execute the following command:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl status taiga-protected</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="expose-taiga-nginx">2.12. Expose Taiga with NGINX</h3>
<div class="paragraph">
<p>The recommended way to serve Taiga is to use NGINX proxy server.</p>
</div>
<div class="listingblock" id="nginx">
<div class="title">Remove the default NGINX config file to avoid collision with Taiga:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo rm /etc/nginx/sites-enabled/default</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create the logs folder (mandatory)</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>mkdir -p ~/logs</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create and edit the <code>/etc/nginx/conf.d/taiga.conf</code> file as follows, choosing between serving Taiga in a <strong>subdomain</strong> or in a <strong>subpath</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Configure NGINX for Taiga <strong>in a subdomain</strong>,</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="nginx"><span></span><span class="tok-k">server</span> <span class="tok-p">{</span>&#x000A;    <span class="tok-kn">listen</span> <span class="tok-mi">80</span> <span class="tok-s">default_server</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">server_name</span> <span class="tok-s">taiga.mycompany.com</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">return</span> <span class="tok-mi">301</span> <span class="tok-s">https://</span><span class="tok-nv">$server_name$request_uri</span><span class="tok-p">;</span>&#x000A;<span class="tok-p">}</span>&#x000A;&#x000A;<span class="tok-k">server</span> <span class="tok-p">{</span>&#x000A;    <span class="tok-kn">listen</span> <span class="tok-mi">443</span> <span class="tok-s">default_server</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">server_name</span> <span class="tok-s">taiga.mycompany.com</span><span class="tok-p">;</span>  <span class="tok-c1">#  See http://nginx.org/en/docs/http/server_names.html</span>&#x000A;&#x000A;    <span class="tok-kn">large_client_header_buffers</span> <span class="tok-mi">4</span> <span class="tok-mi">32k</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">client_max_body_size</span> <span class="tok-s">50M</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">charset</span> <span class="tok-s">utf-8</span><span class="tok-p">;</span>&#x000A;&#x000A;    <span class="tok-kn">access_log</span> <span class="tok-s">/home/taiga/logs/nginx.access.log</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">error_log</span> <span class="tok-s">/home/taiga/logs/nginx.error.log</span><span class="tok-p">;</span>&#x000A;&#x000A;    <span class="tok-c1"># TLS: Configure your TLS following the best practices inside your company</span>&#x000A;    <span class="tok-c1"># Other configurations</span>&#x000A;&#x000A;    <span class="tok-c1"># Frontend</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">alias</span> <span class="tok-s">/home/taiga/taiga-front-dist/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">index</span> <span class="tok-s">index.html</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">try_files</span> <span class="tok-nv">$uri</span> <span class="tok-nv">$uri/</span> <span class="tok-s">index.html</span> <span class="tok-p">=</span><span class="tok-mi">404</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># API</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/api/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Host</span> <span class="tok-nv">$http_host</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Real-IP</span> <span class="tok-nv">$remote_addr</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Scheme</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-Proto</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-For</span> <span class="tok-nv">$proxy_add_x_forwarded_for</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_pass</span> <span class="tok-s">http://127.0.0.1:8001/api/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_redirect</span> <span class="tok-no">off</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Admin</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/admin/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Host</span> <span class="tok-nv">$http_host</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Real-IP</span> <span class="tok-nv">$remote_addr</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Scheme</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-Proto</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-For</span> <span class="tok-nv">$proxy_add_x_forwarded_for</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_pass</span> <span class="tok-s">http://127.0.0.1:8001/admin/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_redirect</span> <span class="tok-no">off</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Static files</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/static/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">alias</span> <span class="tok-s">/home/taiga/taiga-back/static/</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Media</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/_protected/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">internal</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">alias</span> <span class="tok-s">/home/taiga/taiga-back/media/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">add_header</span> <span class="tok-s">Content-disposition</span> <span class="tok-s">&quot;attachment&quot;</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Unprotected section</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/media/exports/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">alias</span> <span class="tok-s">/home/taiga/taiga-back/media/exports/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">add_header</span> <span class="tok-s">Content-disposition</span> <span class="tok-s">&quot;attachment&quot;</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/media/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Host</span> <span class="tok-nv">$http_host</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Real-IP</span> <span class="tok-nv">$remote_addr</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Scheme</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-Proto</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-For</span> <span class="tok-nv">$proxy_add_x_forwarded_for</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_pass</span> <span class="tok-s">http://127.0.0.1:8003/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_redirect</span> <span class="tok-no">off</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Events</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/events</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">proxy_http_version</span> <span class="tok-mi">1</span><span class="tok-s">.1</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Upgrade</span> <span class="tok-nv">$http_upgrade</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Connection</span> <span class="tok-s">&quot;upgrade&quot;</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_connect_timeout</span> <span class="tok-s">7d</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_send_timeout</span> <span class="tok-s">7d</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_read_timeout</span> <span class="tok-s">7d</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_pass</span> <span class="tok-s">http://127.0.0.1:8888/events</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configure NGINX for Taiga <strong>in a subpath</strong>,</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="nginx"><span></span><span class="tok-k">server</span> <span class="tok-p">{</span>&#x000A;    <span class="tok-kn">listen</span> <span class="tok-mi">80</span> <span class="tok-s">default_server</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">server_name</span> <span class="tok-s">mycompany.com</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">return</span> <span class="tok-mi">301</span> <span class="tok-s">https://</span><span class="tok-nv">$server_name$request_uri</span><span class="tok-p">;</span>&#x000A;<span class="tok-p">}</span>&#x000A;&#x000A;<span class="tok-k">server</span> <span class="tok-p">{</span>&#x000A;    <span class="tok-kn">listen</span> <span class="tok-mi">443</span> <span class="tok-s">default_server</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">server_name</span> <span class="tok-s">mycompany.com</span><span class="tok-p">;</span>  <span class="tok-c1">#  See http://nginx.org/en/docs/http/server_names.html</span>&#x000A;&#x000A;    <span class="tok-kn">large_client_header_buffers</span> <span class="tok-mi">4</span> <span class="tok-mi">32k</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">client_max_body_size</span> <span class="tok-s">50M</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">charset</span> <span class="tok-s">utf-8</span><span class="tok-p">;</span>&#x000A;&#x000A;    <span class="tok-kn">access_log</span> <span class="tok-s">/home/taiga/logs/nginx.access.log</span><span class="tok-p">;</span>&#x000A;    <span class="tok-kn">error_log</span> <span class="tok-s">/home/taiga/logs/nginx.error.log</span><span class="tok-p">;</span>&#x000A;&#x000A;    <span class="tok-c1"># TLS: Configure your TLS following the best practices inside your company</span>&#x000A;    <span class="tok-c1"># Other configurations</span>&#x000A;&#x000A;    <span class="tok-c1"># Frontend</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/taiga/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">alias</span> <span class="tok-s">/home/taiga/taiga-front-dist/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">index</span> <span class="tok-s">index.html</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">try_files</span> <span class="tok-nv">$uri</span> <span class="tok-nv">$uri/</span> <span class="tok-s">index.html</span> <span class="tok-p">=</span><span class="tok-mi">404</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># API</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/taiga/api/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Host</span> <span class="tok-nv">$http_host</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Real-IP</span> <span class="tok-nv">$remote_addr</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Scheme</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-Proto</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-For</span> <span class="tok-nv">$proxy_add_x_forwarded_for</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_pass</span> <span class="tok-s">http://127.0.0.1:8001/api/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_redirect</span> <span class="tok-no">off</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Admin</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/taiga/admin/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Host</span> <span class="tok-nv">$http_host</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Real-IP</span> <span class="tok-nv">$remote_addr</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Scheme</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-Proto</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-For</span> <span class="tok-nv">$proxy_add_x_forwarded_for</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_pass</span> <span class="tok-s">http://127.0.0.1:8001/admin/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_redirect</span> <span class="tok-no">off</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Static files</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/taiga/static/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">alias</span> <span class="tok-s">/home/taiga/taiga-back/static/</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Media</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/taiga/_protected/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">internal</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">alias</span> <span class="tok-s">/home/taiga/taiga-back/media/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">add_header</span> <span class="tok-s">Content-disposition</span> <span class="tok-s">&quot;attachment&quot;</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Unprotected section</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/taiga/media/exports/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">alias</span> <span class="tok-s">/home/taiga/taiga-back/media/exports/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">add_header</span> <span class="tok-s">Content-disposition</span> <span class="tok-s">&quot;attachment&quot;</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/taiga/media/</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Host</span> <span class="tok-nv">$http_host</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Real-IP</span> <span class="tok-nv">$remote_addr</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Scheme</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-Proto</span> <span class="tok-nv">$scheme</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">X-Forwarded-For</span> <span class="tok-nv">$proxy_add_x_forwarded_for</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_pass</span> <span class="tok-s">http://127.0.0.1:8003/</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_redirect</span> <span class="tok-no">off</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;    <span class="tok-c1"># Events</span>&#x000A;    <span class="tok-kn">location</span> <span class="tok-s">/taiga/events</span> <span class="tok-p">{</span>&#x000A;        <span class="tok-kn">proxy_http_version</span> <span class="tok-mi">1</span><span class="tok-s">.1</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Upgrade</span> <span class="tok-nv">$http_upgrade</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_set_header</span> <span class="tok-s">Connection</span> <span class="tok-s">&quot;upgrade&quot;</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_connect_timeout</span> <span class="tok-s">7d</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_send_timeout</span> <span class="tok-s">7d</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_read_timeout</span> <span class="tok-s">7d</span><span class="tok-p">;</span>&#x000A;        <span class="tok-kn">proxy_pass</span> <span class="tok-s">http://127.0.0.1:8888/events</span><span class="tok-p">;</span>&#x000A;    <span class="tok-p">}</span>&#x000A;&#x000A;<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Execute the following command to verify the NGINX configuration and to track any error in the service:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo nginx -t</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, restart the <code>nginx</code> service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl restart nginx</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Restart all Taiga services after updating the configuration:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl restart <span class="tok-s1">&#39;taiga*&#39;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you should have the service up and running on: <code><a class="bare" href="https://taiga.mycompany.com/">https://taiga.mycompany.com/</a></code> or <code><a class="bare" href="https://mycompany.com/taiga">https://mycompany.com/taiga</a></code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="expose-taiga-other">2.13. Other methods to expose Taiga</h3>
<div class="paragraph">
<div class="title">Caddy server</div>
<p>It&#8217;s possible to serve Taiga (in a subdomain) with Caddy as well, following the next guides:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>install caddy &gt;= 2.4.1</p>
</li>
<li>
<p>create a symlink from <code>media</code> to <code>_protected</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>cd ~/taiga-back&#x000A;ln -s media/ _protected</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>use a Caddyfile based on <a href="Caddyfile">this</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="extend-taiga">2.14. Extend Taiga</h3>
<div class="paragraph">
<p>With this installation, you have access to a fair amount of features of Taiga. However, you may want to extend it with other functionalities or plugins, such Slack integration or login with Github. To extend Taiga, check all the available options at <a class="bare" href="https://resources.taiga.io/extend/how-to-extend-taiga/">https://resources.taiga.io/extend/how-to-extend-taiga/</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="troubleshooting">2.15. Troubleshooting</h3>
<div class="ulist">
<div class="title">If you face any issue during or after installing Taiga, please check the content of the following files:</div>
<ul>
<li>
<p><code>/etc/nginx/conf.d/taiga.conf</code></p>
</li>
<li>
<p><code>/etc/systemd/system/taiga.service</code></p>
</li>
<li>
<p><code>/etc/systemd/system/taiga-async.service</code></p>
</li>
<li>
<p><code>/etc/systemd/system/taiga-events.service</code></p>
</li>
<li>
<p><code>/etc/systemd/system/taiga-protected.service</code></p>
</li>
<li>
<p><code>/home/taiga/taiga-back/settings/config.py</code></p>
</li>
<li>
<p><code>/home/taiga/taiga-front-dist/dist/conf.json</code></p>
</li>
<li>
<p><code>/home/taiga/taiga-events/.env</code></p>
</li>
<li>
<p><code>/home/taiga/taiga-protected/.venv</code></p>
</li>
<li>
<p>The result of command <code>sudo systemctl status 'taiga*'</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Execute the following commands to check the status of services used by Taiga:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span></span>sudo systemctl status nginx&#x000A;sudo systemctl status rabbitmq-server&#x000A;sudo systemctl status postgresql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check If you see any error in the service statuses and make sure all service status is <code>Active: active (running)</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-09-06 09:18:37 +0200
</div>
</div>
</div>
</div>
</div>
<script>
  new mlPushMenu( document.getElementById( 'toc' ), document.getElementById( 'trigger' ), {type : 'cover'} );
  $( ".mp-level[data-level!=1]" ).each( function() {$(this).parents("li").addClass('icon icon-arrow-left'); } );
</script>